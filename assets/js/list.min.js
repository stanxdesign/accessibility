/*
表單無障礙互動注意事項：
1. 可被TAB選取的物件需要依照DOM的順序來FOCUS
2. 所有可被TAB選取的物件，如果在VIEWPORT中不可見，則不應該被FOCUS
3. 呈2.不可被 FOCUS元素需要 加上 tabindex="-1" 以及 aria-disabled="true"，並在可見時移除這兩個屬性
4. 包含沒有被切換到的頁籤、收合的項目、點選才會展開的抽屜，都必須要處理 tabindex
5. 少數特殊的狀況下，需使用 tabindex="1" 來強制設定順序。但這樣的情況應該要避免
*/

const area = document.querySelectorAll('.result-area h2');
area.forEach(item => {
		item.addEventListener('click', (e) => {
			e.currentTarget.parentElement.classList.toggle('active');
		});
		item.addEventListener('keydown', (e) => {
			if (e.key === 'Enter' || e.key === ' ') {
				e.currentTarget.parentElement.classList.toggle('active');
			}
	});
});

const levelArea = document.querySelectorAll('.result-all-item .result-info');
levelArea.forEach(l => {
	l.addEventListener('click', (e) => {
		const parent = e.currentTarget.parentElement;
		document.querySelectorAll('.result-all-item.active').forEach(item => {
			if (item !== parent) {
				item.classList.remove('active');
			}
		});
		parent.classList.toggle('active');
	});

	l.addEventListener('keydown', (e) => {
		if (e.key === 'Enter' || e.key === ' ') {
			const parent = e.currentTarget.parentElement;
			document.querySelectorAll('.result-all-item.active').forEach(item => {
				if (item !== parent) {
					item.classList.remove('active');
				}
			});
			parent.classList.toggle('active');
		}
	});
});