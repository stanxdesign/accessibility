// @use 'sass:math';
@use '../abstracts/mixins' as *;

#listPage{
	#content{
		margin-top: 6rem;
	}
	#navbar-sub{
		display: none;
	}
	#filterPanel{
		width: 100%;
		margin: 1.5rem auto;
		flex-direction: row;
		flex-wrap: wrap;
		padding: 0;
		background-color: var(--c-brand);
		color: var(--c-brand-t);
		overflow: hidden;
		#filterPanelForm{
			max-width: 100%;
			order: 1;
			flex-grow: 1;
			flex-direction: row;
			flex-wrap: wrap;
			align-items: center;
			padding: 1rem;
			border-radius: 0 1rem 1rem 0;
			background-color: var(--c-brand);
			color: var(--c-brand-t);
			.form-group {
				flex-direction: column;
				flex: 1 1 auto;
				align-items: start;
				label:not(.tag){
					flex: 0;
					padding: 0ch;
				}
			}
			#send{
				margin-left: auto;
				padding-left: 2rem;
				padding-right: 2rem;
			}
		}
		@include MD{
			width: 100%;
			margin: 1.5rem auto;
			flex-direction: row;
			flex-wrap: nowrap;
			padding: 0;
			background-color: var(--c-brand);
			color: var(--c-brand-t);
			overflow: hidden;
			#filterPanelForm{
				max-width: 100%;
				order: 1;
				flex-grow: 1;
				flex-direction: row;
				align-items: flex-end;
				padding: 1rem;
				border-radius: 0 1rem 1rem 0;
				.form-group {
					flex-direction: column;
					flex: 0 1 25%;
					align-items: start;
				}
			}
		}
	}

	#layoutBtns{
		position: relative;
		display: flex;
		flex-wrap: nowrap;
		justify-content: center;
		color: var(--c-brand-t);
		padding: .5rem;
		margin-bottom: 2rem;
		a{
			display: flex;
			justify-content: space-between;
			border: var(--c-g3) solid 1px;
			color: var(--c-black);
			background-color: var(--c-white);
			align-items: center;
			&:first-child{
				border-radius:1rem 0 0 1rem;
			}
			&:last-child{
				border-radius:0 1rem 1rem 0;
			}
			&::before{
				font-size: 1rem;
				transition: all .3s ease-in-out;
				color: var(--c-main);
			}
			&.active{
				background-color: var(--c-highlight);
				color: var(--c-highlight-t);
				&::before{
					font-size: 1.5rem;
					color: var(--c-brand);
					rotate: 360deg;
				}
			}
			&:hover{
				&::before{
					font-size: 1.5rem;
					color: var(--c-brand);
					rotate: 360deg;
				}
			}
		}
		&::before{
			content: '';
			display: block;
			width:100%;
			position: absolute;
			top: 50%;
			z-index: -1;
			border-top: 1px solid var(--c-front-brand);
		}
	}

	.result-item{
		background-color: var(--c-brand);
		color: var(--c-brand-t);
		display: grid;
		grid-template-areas: 'title  tab-bar'
													'info tab-bar'
													'tab-info tab-info';
		border-radius: 0;
		overflow: hidden;
		border: 2px solid var(--c-main);
		padding: 0;
		width: calc(100% - 1.5rem);
		max-height: auto;
		margin: 0 .75rem;
		border-top: none 0 transparent;
		border-bottom: dotted 1px var(--c-white);
		&:first-child{
			margin-top: 2rem;
			border-top: solid 2px var(--c-main);
			border-radius: 2rem 2rem 0 0;
		}
		&:last-child{
			border-bottom: solid 2px var(--c-main);
			border-radius: 0 0 2rem 2rem;
		}
		h3{
			grid-area: title;
			font-size: 1.5rem;
			padding: 1rem 0 0 1rem;
			margin: 0;
			color: var(--c-white);
		}
		.info{
			padding: 0 1rem;
			grid-area: info;
		}
		.tab-bar{
			grid-area: tab-bar;
			justify-content: right;
			align-items: center;
			gap: 1ch;
			padding: 0 1rem;
			.tab-bar-btn{
				border: var(--c-highlight) solid 1px;
				background-color: var(--c-brand);
				color: var(--c-brand-t);
				border-radius: 1rem;
				.mark{
					background-color: var(--c-highlight);
				}
				&.active{
					background-color: var(--c-highlight);
					color: var(--c-highlight-t);
					.mark{
						background-color: var(--c-white);
					}
				}
			}
		}
		.tab-content{
			grid-area: tab-info;
			padding: 0;
			border: none;
			.tab-content-info{
				border-top-width: 0;
				padding: 0 1rem;
				&.active{
					border-top: solid 2px var(--c-highlight);
					padding: 1rem;
				}
			}
		}
	}

	.school-title{
		font-size: 2rem;
		margin-bottom: 2rem;
	}
	.school-info{
		clear: both;
		.align-right{
			text-align: right;
		}
	}
	section{
		h2{
			width: 100%;
			grid-area: h2;
			margin:0;
			background-color: var(--c-main);
			color: var(--c-main-t);
			padding:.5rem 1rem;
			border: 1px solid var(--c-main);
			border-radius:1rem 1rem 0 0;
			box-shadow: 0 -4px 6px 0 var(--c-shadow);
			label + label{
				&::before{
					content: "ïƒš";
					@include fa-icon;
					padding: 0 .5ch;
					opacity: .8;
				}
			}
		}

		.result-all-item{
			position: relative;
			display: flex;
			flex-direction: column;
			flex-wrap: wrap;
			justify-content: left;
			height: auto;
			max-height: 100%;
			background-color: var(--c-g1);
			overflow-y: hidden;
			overflow-x: auto;
			transition: all .5s ease-in-out;
			.result-info{
				left: 0;
				order: 2;
				padding: 1rem;
				height: auto;
				width: 100%;
				max-height: 100%;
				transition: all .5s ease-in-out;
				cursor: pointer;
				h3{
					padding: 0;
					border: none 0px transparent;
					label{
						float: right;
						display: inline-block;
						&::before{
							background-color:var(--c-highlight);
						}
					}
					button{
						float: right;
						display: inline-block;
					}
					&::before{
						display: inline-block;
						width: 2rem;
						height: 2rem;
						font-size: 1rem;
						line-height: 2rem;
						text-align: center;
						transition: all .3s ease-in-out;
						vertical-align: middle;
						margin-top: -3px;
						border-radius: 99rem;
						color: var(--c-main);
					}
				}
				p{
					width: 100%;
					padding:0 .5rem;
					font-family: $font-family;
					font-weight: normal;
					&::before{
						@include fa-icon;
						margin-left: -3px;
						color: var(--c-main);
					}
					&:empty{
						display: none;
					}
				}
				&:hover{
					h3{
						&::before{
							scale: 1.2;
							rotate: 360deg;
							background-color: var(--c-highlight);
							color: var(--c-highlight-t);
						}
					}
				}
			}
			.result-cover{
				order: 1;
				justify-self: start;
				height: auto;
				max-height: 100%;
				align-self: stretch;
				opacity: 1;
				pointer-events: all;
				transition: all .5s ease-in-out;
				overflow: hidden;
				border-radius: .5rem;
				box-shadow: 0 0 1rem 0 var(--c-shadow);
				.swiffy-slider {
					width: 100%;
					height: 100%;
					aspect-ratio: 16 / 10;
				}
				.slider-nav{
					bottom: calc(50% - 1.5rem);
					right: auto;
					left: -.25rem;
					color: var(--c-brand-t) !important;
					background-color: var(--c-brand);
					border-radius: 99rem;
				}
				.slider-nav-next{
					left: auto;
					right: -.25rem;
				}
			}
			.items{
				flex-grow: 1;
				flex-shrink: 1;
				flex-basis: 1rem;
				order: 3;
				padding: 0 1rem 1rem 1rem;
				align-content: start;
				gap: 0;
				transition: all .5s ease-in-out;
				height: auto;
				align-content: center;
				flex-wrap: nowrap;
				overflow-y: visible;
				overflow-x: auto;
				width: 100%;
				min-height: 4rem;
				.fa:has(span){
					flex: 0 0 auto;
					order: 2;
					&.active{
						order: 1;
					}
				}
			}
			.level{
				order: 9;
				.items{
					flex-wrap: wrap;
					margin-left: -.5rem !important;
				}
			}
			&:not(.active){
				overflow: hidden;
				align-items: start;
				.items{
					align-self: stretch;
				}
				.result-info{
					max-width: 100%;
					height: 3.5rem;
					max-height: 3.5rem;
					overflow: hidden;
				}
				.result-cover{
					order: 1;
					flex-grow: 0;
					flex-shrink: 0;
					flex-basis: 8rem;
					max-height: 0;
					opacity: 0;
					pointer-events: none;
					.swiffy-slider{
						aspect-ratio: none;
						width: 100%;
						height: 100%;
					}
				}

				&:has(.active){
					align-items: start;
					height: auto;
					max-height: 100%;
					.result-info{
						height: auto;
						max-height: 100%;
					}
					.result-cover{
						height: auto;
						max-height: 100%;
						opacity: 1;
						pointer-events: all;
					}
					.items{
						height: auto;
						align-content: center;
					}
				}
			}
			&:last-child{
				border-radius: 0 0 1rem 1rem;
				overflow: hidden;
			}

			@include SM{
				.result-info{
					order: 1;
					width: calc((100% - 14rem));
					margin-left: 14rem;
					min-height: 6rem;
				}
				.result-cover{
					position: absolute;
					top: 1rem;
					left: 1rem;
					order: 2;
					max-width: 50%;
					width: 13rem;
					height: 8rem;
					opacity: 1;
					pointer-events: all;
					.swiffy-slider {
						width: 100%;
						height: 100%;
						aspect-ratio: 16 / 10;
					}
				}
				.items{
					height: 100%;
					width: calc((100% - 14rem));
					margin-left: 14rem;
					min-height: unset;
					flex-wrap: wrap;
					overflow: visible;
				}
				.level{
					margin-left: 16rem;
					width: calc((100% - 16rem));
					&:last-child{
						margin-bottom: 2rem;
					}
				}
				&:not(.active){
					.result-info{
						width: 100%;
						margin-left: 0;
						min-height: unset;
					}
					.result-cover{
						order: 2;
						opacity: 0;
						pointer-events: none;
					}
					.items{
						height: 100%;
						width: 100%;
						margin-left: 0%;
						min-height: unset;
						flex-wrap: wrap;
						overflow: visible;
					}
					.level{
						&:last-child{
							margin-bottom: 0;
						}
					}
					&:has(.active){
						.result-info{
							width: calc(100% - 14rem);
							margin-left: 14rem;
						}
						.items{
							width: calc(100% - 14rem);
							margin-left: 14rem;
						}
						.result-cover{
							position: absolute;
							top: 1rem;
							left: 1rem;
							order: 2;
							max-width: 50%;
							width: 13rem;
							height: 8rem;
							opacity: 1;
							pointer-events: all;
						}
						.level{
							margin-left: 16rem;
							&:last-child{
								margin-bottom: 2rem;
							}
						}
					}
				}
			}
		}

	}
}